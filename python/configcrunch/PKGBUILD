# Maintainer: Julian Liebig <julian.liebig@tudock.de>

pkgname=python-configcrunch
_name=${pkgname#python-}
pkgver="2.1.1"
pkgrel=1
pkgdesc="Configuration parser based on YAML-Files with support for variables, overlaying and hierarchies"
arch=('any')
url="https://github.com/theCapypara/${_name}"
license=('MIT')
groups=()
depends=('python-schema')
makedepends=('python-build' 'python-installer' 'python-wheel' 'python-setuptools' 'python-setuptools-rust')
checkdepends=('python-tox')
source=(${pkgname}-${pkgver}.tar.gz::${url}/archive/refs/tags/${pkgver}.tar.gz)
sha256sums=('d54d647d84f832ef8cba8e67f06bee1e8e7cc94b9a8e663c18ca7bba37f9b608')

build() {
    cd "${_name}-${pkgver}"

    python -m build --wheel --no-isolation
}

check(){
    cd "${_name}-${pkgver}/tests"
    
    tox
}

package() {
    cd "${_name}-${pkgver}"
    
    python -m installer --destdir="${pkgdir}" dist/*.whl
}
